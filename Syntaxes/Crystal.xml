<?xml version="1.0" encoding="UTF-8" ?>
<syntax name="crystal">
  <meta>
    <name>Crystal</name>
    <type>script</type>
    <preferred-file-extension>cr</preferred-file-extension>
  </meta>

  <detectors>
    <extension priority="1.0">cr</extension>
  </detectors>

  <comments>
    <single>
      <expression>#</expression>
    </single>
  </comments>

  <brackets>
    <pair open="{" close="}" />
    <pair open="[" close="]" />
    <pair open="(" close=")" />
  </brackets>

  <surrounding-pairs>
    <pair open="{" close="}" />
    <pair open="[" close="]" />
    <pair open="(" close=")" />
    <pair open="&apos;" close="&apos;" />
    <pair open="&quot;" close="&quot;" />
    <pair open="`" close="`" />
    <pair open="“" close="”" />
    <pair open="‘" close="’" />
  </surrounding-pairs>

  <scopes>
    <include syntax="self" collection="comments" />
    <include syntax="self" collection="definitions" />
  </scopes>

  <collections>
    <collection name="comments">
      <scope name="crystal.comment.single" spell-check="true">
        <expression>\#(.*)$</expression>
        <capture number="1" name="crystal.comment.content" />
      </scope>
    </collection>

    <collection name="definitions">
      <scope name="crystal.value.number.float.fraction">
        <expression>\b[0-9][0-9_]*\.[0-9][0-9_]*([eE][+-]?[0-9_]+)?(f32|f64)?\b</expression>
      </scope>
      <scope name="crystal.value.number.float.exponent">
        <expression>\b[0-9][0-9_]*(\.[0-9][0-9_]*)?[eE][+-]?[0-9_]+(f32|f64)?\b</expression>
      </scope>
      <scope name="crystal.value.number.integer.decimal">
        <expression>\b(?!0[0-9])[0-9][0-9_]*([ui](8|16|32|64|128))?\b</expression>
      </scope>
      <scope name="crystal.value.number.integer.hexadecimal">
        <expression>\b0x[a-fA-F0-9_]+([ui](8|16|32|64|128))?\b</expression>
      </scope>
      <scope name="crystal.value.number.integer.octal">
        <expression>\b0o[0-7_]+([ui](8|16|32|64|128))?\b</expression>
      </scope>
    </collection>
  </collections>
</syntax>
